<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de Estructuras de Carbono</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
            overflow: hidden;
        }

        .card-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
        }

        .card-content {
            padding: 20px;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #f0f0f0;
        }

        .viewer {
            height: 400px;
            border: 1px solid #ddd;
            border-radius: 8px;
            position: relative;
            background: white;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            z-index: 1;
        }

        .control-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: rgba(255,255,255,0.9);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .error {
            padding: 12px;
            background: #fee2e2;
            border: 1px solid #fecaca;
            border-radius: 4px;
            color: #dc2626;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const COMMON_MOLECULES = {
            'CH3CH2CH3': 'Propano',
            'CH3CH2OH': 'Etanol',
            'CH3COOH': 'Ácido acético',
            'C6H6': 'Benceno',
            'CH3CH2CH2CH3': 'Butano',
            'CH3CH=CH2': 'Propeno',
            'CH3CCH': 'Propino'
        };

        function App() {
            const [formula, setFormula] = React.useState('');
            const [zoom, setZoom] = React.useState(1);
            const [rotation, setRotation] = React.useState(0);
            const [error, setError] = React.useState('');

            const parseFormula = (formula) => {
                // Simplificada para este ejemplo
                return formula.length > 0;
            };

            const StructureViewer = ({ formula }) => {
                if (!formula) return null;

                // Configuración básica para diferentes moléculas
                const structures = {
                    'CH3CH2CH3': (
                        <g>
                            <line x1="150" y1="200" x2="250" y2="200" stroke="black" strokeWidth="2"/>
                            <text x="140" y="195" fontSize="12">CH₃</text>
                            <text x="255" y="195" fontSize="12">CH₃</text>
                            <text x="195" y="195" fontSize="12">CH₂</text>
                        </g>
                    ),
                    'CH3CH2OH': (
                        <g>
                            <line x1="150" y1="200" x2="250" y2="200" stroke="black" strokeWidth="2"/>
                            <text x="140" y="195" fontSize="12">CH₃</text>
                            <text x="255" y="195" fontSize="12">OH</text>
                            <text x="195" y="195" fontSize="12">CH₂</text>
                        </g>
                    ),
                    'C6H6': (
                        <g>
                            <polygon 
                                points="200,150 250,175 250,225 200,250 150,225 150,175" 
                                fill="none" 
                                stroke="black" 
                                strokeWidth="2"
                            />
                            <circle 
                                cx="200" 
                                cy="200" 
                                r="15" 
                                fill="none" 
                                stroke="black" 
                                strokeWidth="1" 
                                strokeDasharray="3,3"
                            />
                        </g>
                    ),
                    'CH3COOH': (
                        <g>
                            <line x1="150" y1="200" x2="250" y2="200" stroke="black" strokeWidth="2"/>
                            <text x="140" y="195" fontSize="12">CH₃</text>
                            <text x="220" y="195" fontSize="12">C</text>
                            <text x="255" y="195" fontSize="12">OH</text>
                            <text x="220" y="180" fontSize="12">O</text>
                        </g>
                    )
                };

                return (
                    <svg 
                        viewBox="0 0 400 400" 
                        style={{
                            width: '100%',
                            height: '100%',
                            transform: `scale(${zoom}) rotate(${rotation}deg)`,
                            transition: 'transform 0.3s'
                        }}
                    >
                        {structures[formula] || (
                            <text x="200" y="200" textAnchor="middle">
                                Estructura no disponible
                            </text>
                        )}
                    </svg>
                );
            };

            return (
                <div className="card">
                    <div className="card-header">
                        <h1 className="card-title">Visualizador de Estructuras de Carbono</h1>
                    </div>
                    <div className="card-content">
                        <div className="input-group">
                            <input
                                type="text"
                                className="input"
                                value={formula}
                                onChange={(e) => setFormula(e.target.value.toUpperCase())}
                                placeholder="Ingresa una fórmula (ej: CH3CH2CH3)"
                            />
                        </div>

                        <div className="btn-group">
                            {Object.entries(COMMON_MOLECULES).map(([mol, name]) => (
                                <button
                                    key={mol}
                                    className="btn"
                                    onClick={() => setFormula(mol)}
                                >
                                    {name}
                                </button>
                            ))}
                        </div>

                        {error && <div className="error">{error}</div>}

                        <div className="viewer">
                            <div className="controls">
                                <button 
                                    className="control-btn"
                                    onClick={() => setZoom(z => Math.min(z + 0.1, 2))}
                                >
                                    +
                                </button>
                                <button 
                                    className="control-btn"
                                    onClick={() => setZoom(z => Math.max(z - 0.1, 0.5))}
                                >
                                    -
                                </button>
                                <button 
                                    className="control-btn"
                                    onClick={() => setRotation(r => (r + 90) % 360)}
                                >
                                    ↻
                                </button>
                            </div>
                            <StructureViewer formula={formula} />
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
